# Read `man 5 sway` for a complete reference.

### Notification center
exec swaync

### Fonts
font pango:"JetBrainsMono Nerd Font" Regular 11

### Input method
exec fcitx5

### Variables
set $mod Mod4

set $left h
set $down j
set $up k
set $right l

set $term ghostty
set $menu wofi --show=drun

### Output configuration

# Wallpaper daemon
exec swww-daemon
exec swww img ~/.config/sway/nixdog/background/default.jpg

### Cursor (use Bibata-Modern-Classic for warm Gruvbox feel)
seat seat0 xcursor_theme Bibata-Modern-Classic 24

### Disable client-side decorations for GTK apps
exec_always gsettings set org.gnome.desktop.wm.preferences button-layout ''

### GTK cursor theme (for consistency with sway cursor)
exec_always gsettings set org.gnome.desktop.interface cursor-theme 'Bibata-Modern-Classic'
exec_always gsettings set org.gnome.desktop.interface cursor-size 24

### Appearance
gaps inner 0
gaps outer 0

# Smart gaps - disable gaps when only one window
smart_gaps on

# Border style (pixel = no title bar, normal = with title bar)
default_border pixel 2
default_floating_border pixel 2

# Hide borders when only one window
hide_edge_borders smart

# Force pixel borders on all windows (override CSD)
for_window [title=".*"] border pixel 2

# Floating window rules
for_window [app_id="com.saivert.pwvucontrol"] floating enable, resize set 400 300, move position cursor, move up 320
for_window [app_id="pavucontrol"] floating enable
for_window [app_id="nm-connection-editor"] floating enable
for_window [app_id="blueman-manager"] floating enable
for_window [app_id="gnome-calculator"] floating enable
for_window [window_role="pop-up"] floating enable
for_window [window_role="dialog"] floating enable
for_window [window_type="dialog"] floating enable

# Gruvbox border colors: border, background, text, indicator, child_border
client.focused #458588 #458588 #1d2021 #689d6a #458588
client.unfocused #3c3836 #1d2021 #928374 #3c3836 #3c3836
client.focused_inactive #504945 #1d2021 #ebdbb2 #504945 #504945
client.urgent #cc241d #cc241d #ebdbb2 #cc241d #cc241d

### Input configuration
input * {
  dwt enabled
  tap enabled
  natural_scroll enabled
  middle_emulation enabled
  xkb_options "caps:escape"
}

### Behavior
focus_follows_mouse yes
mouse_warping container
workspace_auto_back_and_forth yes
focus_on_window_activation smart

### Key bindings
bindsym $mod+t exec $term
bindsym $mod+q kill
bindsym $mod+Space exec $menu

# Quick app launchers
bindsym $mod+b exec firefox
bindsym $mod+n exec nautilus

# Notification center toggle
bindsym $mod+Shift+n exec swaync-client -t -sw

floating_modifier $mod normal
bindsym $mod+c reload
bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'

# Shift focus windows
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Swap focus between the tiling area and the floating area
bindsym $mod+Return focus mode_toggle

# Move windows
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# Split containers
bindsym $mod+v splitv
bindsym $mod+g splith

# Switch the current container between different layout styles
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
# Toggle the current focus between tiling and floating mode
bindsym $mod+d floating toggle

# Sticky floating window (stays on all workspaces)
bindsym $mod+Shift+s sticky toggle

# Make the current focus fullscreen
bindsym $mod+f fullscreen

# Move focus to the parent container
bindsym $mod+a focus parent

# Scratchpad
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# Resizing containers
mode "resize" {
  bindsym $left resize shrink width 10px
  bindsym $down resize grow height 10px
  bindsym $up resize shrink height 10px
  bindsym $right resize grow width 10px

  bindsym Left resize shrink width 10px
  bindsym Down resize grow height 10px
  bindsym Up resize shrink height 10px
  bindsym Right resize grow width 10px

  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

### Utilities
# Special keys to adjust volume via PulseAudio
bindsym --locked XF86AudioMute exec pactl set-sink-mute \@DEFAULT_SINK@ toggle
bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume \@DEFAULT_SINK@ -5%
bindsym --locked XF86AudioRaiseVolume exec pactl set-sink-volume \@DEFAULT_SINK@ +5%
bindsym --locked XF86AudioMicMute exec pactl set-source-mute \@DEFAULT_SOURCE@ toggle
# Special keys to adjust brightness via brightnessctl
bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym --locked XF86MonBrightnessUp exec brightnessctl set 5%+
# Screenshots
bindsym Print exec grim - | wl-copy
bindsym Shift+Print exec grim -g "$(slurp)" - | wl-copy
bindsym $mod+Print exec grim ~/Pictures/screenshot-$(date +%Y%m%d-%H%M%S).png
bindsym $mod+Shift+Print exec grim -g "$(slurp)" ~/Pictures/screenshot-$(date +%Y%m%d-%H%M%S).png
# Wallpaper controls
bindsym $mod+Shift+w exec ~/.config/sway/scripts/wallpaper random
# Lock screen
bindsym $mod+Escape exec swaylock

# Status Bar
bar swaybar_command waybar

# Screenlock
exec swayidle -w \
    timeout 240 'swaylock -f' \
    timeout 270 'swaymsg "output * power off"' \
    resume 'swaymsg "output * power on"' \
    before-sleep 'swaylock -f'

include /etc/sway/config.d/*
